(window.webpackJsonpCybexAddon=window.webpackJsonpCybexAddon||[]).push([[9],{5602:function(e,t,r){"use strict";r.r(t),r.d(t,"DepositModal",function(){return P});var n,a=r(1),i=r(114),s=r(19),o=r(61),l=r(115),c=r(5600),u=r(5621),p=r.n(u),d=r(17),h=r(5664),m=r(113),f=r(33),y=r(5625),b=r(5617),w=r(4),g=r(79),v=r(164),x=r(223),E=r(78),O=r.n(E),S=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),A=function(e,t,r,n){return new(r||(r=Promise))(function(a,i){function s(e){try{l(n.next(e))}catch(e){i(e)}}function o(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){e.done?a(e.value):new r(function(t){t(e.value)}).then(s,o)}l((n=n.apply(e,t||[])).next())})},C=function(e,t){var r,n,a,i,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(a=2&i[0]?n.return:i[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,i[1])).done)return a;switch(n=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(a=(a=s.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){s.label=i[1];break}if(6===i[0]&&s.label<a[1]){s.label=a[1],a=i;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(i);break}a[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],n=0}finally{r=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},j={doWithdraw:s.m,verifyAddress:s.l,selectAsset:s.j,selectFirstAsset:s.k,closeModal:s.h,pushNoti:d.b},P=Object(v.b)(Object(i.b)(function(e){return{modalState:Object(o.f)(e),gateway:Object(o.a)(e),balances:Object(w.F)(e),currentDeposit:Object(o.e)(e),currentCoinInfo:Object(o.d)(e),coinList:Object(o.c)(e),state:e}},j)(Object(l.withStyles)(function(e){return{root:{},innerWrapper:{margin:2*e.spacing.unit+"px 0",height:"100%","&>*:not(:first-of-type)":{marginTop:2*e.spacing.unit}},copyCard:{background:"rgb(243,243,243)",width:"100%"},inputBase:{fontSize:"16px"},inputLabel:{fontSize:"17.6px"}}})(Object(m.c)()(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={currentTab:0,withValue:"",address:"",fee:0,feeCurrency:"",feeAsset:{}},t.verifyAddress=Object(x.debounce)(t.props.verifyAddress,150),t.updateFee=Object(x.debounce)(function(){return A(t,void 0,void 0,function(){var e,t,r,n,a;return C(this,function(i){switch(i.label){case 0:return this.props.balances?(e=this.props.currentDeposit)?(t=this.props.currentCoinInfo,r=this.state.address,t&&(r=t.raw.withdrawPrefix+":"+t.currency+":"+this.state.address),[4,this.props.toolset.chainAssisant.getFakeTransferFee("CYB",r)]):[2,this.setState({fee:0})]:[2];case 1:return n=i.sent(),[4,this.props.toolset.fetcher.fetchAsset("CYB")];case 2:return a=i.sent(),this.props.balances.CYB.value>=Object(g.b)(n.amount,a.precision)?(this.setState({fee:Object(g.b)(n.amount,a.precision),feeCurrency:"CYB",feeAsset:n}),[3,6]):[3,3];case 3:return[4,this.props.toolset.chainAssisant.getFakeTransferFee(e.asset,r)];case 4:return n=i.sent(),[4,this.props.toolset.fetcher.fetchAsset(e.asset)];case 5:if(!(a=i.sent()))return[2];this.setState({fee:Object(g.b)(n.amount,a.precision),feeCurrency:t&&t.currency,feeAsset:n}),i.label=6;case 6:return[2]}})})},150),t.setAddress=function(e){t.setState({address:e.target.value},function(){t.state.address&&t.props.currentDeposit&&t.verifyAddress(t.props.currentDeposit.type,t.state.address),t.updateFee()})},t.setWithValue=function(e){t.setState({withValue:e.target.value})},t}return S(t,e),t.prototype.componentDidMount=function(){this.props.currentDeposit||this.props.selectFirstAsset(),this.updateFee()},t.prototype.componentDidUpdate=function(e){this.props.state.gateway.withdrawSuccess&&this.props.state.gateway.withdrawSuccess!==e.state.gateway.withdrawSuccess&&this.setState({withValue:"",address:""}),this.props.currentDeposit!==e.currentDeposit&&this.updateFee(),this.props.modalState!=e.modalState&&this.props.modalState==s.c.Closed&&this.setState({withValue:"",address:""}),!e.balances&&this.props.balances&&this.updateFee()},t.prototype.render=function(){var e=this,t=this.props,r=t.coinList,n=t.gateway,i=(t.verifyAddress,t.selectAsset),l=t.currentDeposit,u=t.currentCoinInfo,d=t.pushNoti,m=t.modalState,w=t.doWithdraw,g=t.closeModal,v=t.balances,x=t.state,E=(t.toolset,t.t),S=this.props.classes||{},A=(r.find(function(e){return e.asset===n.currentAsset}),l&&v&&v[l.asset]||{value:0}),C=!!this.state.address&&!!l&&Object(o.b)(l.type,this.state.address)(x)===s.a.Invalid,j=!!this.state.address&&!!l&&Object(o.b)(l.type,this.state.address)(x)===s.a.Valid,P=!1,W="";""!==this.state.withValue&&(u&&Number(this.state.withValue)<+u.raw.minWithdraw&&(W=E(f.a.withValueErrorMsgLess),P=!0),Number(this.state.withValue)>A.value&&(W=E(f.a.withValueErrorMsgOver),P=!0));var F=j&&u&&Number(this.state.withValue)>=+u.raw.minWithdraw&&new O.a(A.value).minus(Number(this.state.withValue)).toNumber()>=0,k="";if("CYB"==this.state.feeCurrency)k=Math.max(new O.a(this.state.withValue||0).minus(Number(u?u.raw.withdrawFee:0)).toNumber(),0)+" "+(u&&u.currency);else if(new O.a(A.value).minus(this.state.withValue||0).toNumber()>=this.state.fee)k=Math.max(new O.a(this.state.withValue||0).minus(Number(u?u.raw.withdrawFee:0)).toNumber(),0)+" "+(u&&u.currency);else{var z=new O.a(A.value).minus(this.state.withValue||0).toNumber();k=Math.max(new O.a(this.state.withValue||0).minus(Number(u?u.raw.withdrawFee:0)).minus(this.state.fee).plus(z).toNumber(),0)+" "+(u&&u.currency)}return a.createElement(y.a,{open:m!==s.c.Closed,dialogProps:{disableBackdropClick:!0},onCloseClick:g,title:E(f.a.Funding)},a.createElement(c.K,{value:this.state.currentTab,onChange:function(t,r){return e.setState({currentTab:r})},indicatorColor:"primary",textColor:"primary",variant:"fullWidth"},a.createElement(c.E,{label:E(f.a.Deposit)}),a.createElement(c.E,{label:E(f.a.Withdraw)})),0===this.state.currentTab&&a.createElement(c.A,{classes:{root:S.root},square:!0,elevation:0},a.createElement(c.q,{className:S.innerWrapper,container:!0,direction:"column",alignItems:"center"},a.createElement(c.n,{fullWidth:!0},a.createElement(c.v,{style:{fontSize:"17.5px"},shrink:!0,htmlFor:"currentAsset"},E(f.a.AssetType)),a.createElement(c.D,{fullWidth:!0,displayEmpty:!0,value:n.currentAsset,input:a.createElement(c.t,{name:"currentAsset",id:"currentAsset"}),onChange:function(e){return i(e.target.value)},style:{fontSize:"16px"},name:"currentAsset"},r.map(function(e){return a.createElement(c.z,{key:e.asset,value:e.asset},e.currency)}))),l&&a.createElement(c.q,{style:{marginTop:"2em",textAlign:"center"},container:!0,direction:"column",alignItems:"center"},a.createElement(h.a,{text:l.address.trim(),filename:(l&&[l.accountName,l.type,l.address].join("_"))+".png"})),a.createElement(c.c,{elevation:0,classes:{root:S.copyCard}},a.createElement(c.M,{style:{overflowWrap:"break-word",whiteSpace:"pre-wrap",textAlign:"center",fontSize:"14px",padding:"24px 0"},variant:"body1"},l&&l.address)),l&&a.createElement(p.a,{text:l.address,onCopy:function(){return d(""+(l&&l.type)+E(f.a.AddressCopied),{variant:"success"})}},a.createElement(b.a,{fullWidth:!0,style:{height:"48px",marginTop:"24px",fontSize:"16px"}},E(f.a.CopyAddress))))),1===this.state.currentTab&&a.createElement(c.A,{classes:{root:S.root},square:!0,elevation:0},a.createElement(c.q,{className:S.innerWrapper,container:!0,direction:"column",alignItems:"center"},a.createElement(c.n,{fullWidth:!0},a.createElement(c.v,{style:{fontSize:"17.5px"},shrink:!0,htmlFor:"currentAsset"},E(f.a.AssetType)),a.createElement(c.D,{fullWidth:!0,displayEmpty:!0,value:n.currentAsset,input:a.createElement(c.t,{name:"currentAsset",id:"currentAsset"}),onChange:function(e){return i(e.target.value)},style:{fontSize:"16px"},name:"currentAsset"},r.map(function(e){return a.createElement(c.z,{key:e.asset,value:e.asset},e.currency)}))),a.createElement(c.n,{fullWidth:!0},a.createElement(c.L,{id:"withValue",label:E(f.a.Amount),error:P,helperText:P&&W||" ",InputLabelProps:{style:{fontSize:"17.5px"}},InputProps:{style:{fontSize:"16px"},placeholder:E(f.a.WithdrawMinimum),type:"number",endAdornment:a.createElement(c.u,{position:"end",style:{width:"80px",textAlign:"right"}},E(f.a.Balance)+": "+A.value)},value:this.state.withValue,onChange:this.setWithValue})),a.createElement(c.n,{fullWidth:!0},a.createElement(c.L,{id:"address",label:E(f.a.WithdrawAddress),error:C,helperText:C&&E(f.a.AddressError).replace("{symbol}",u?u.currency:"")||" ",InputLabelProps:{style:{fontSize:"17.5px"}},InputProps:{style:{fontSize:"16px"}},value:this.state.address,onChange:this.setAddress})),a.createElement("div",{style:{marginTop:"12px"}}),a.createElement(c.q,{container:!0},a.createElement(c.q,{item:!0,xs:6,sm:3},a.createElement(c.n,null,a.createElement(c.v,{style:{fontSize:"17.5px",lineHeight:"20px"},htmlFor:"minWithdraw"},E(f.a.WithdrawMinimum)),a.createElement(c.t,{disabled:!0,disableUnderline:!0,id:"minWithdraw",value:u&&u.raw.minWithdraw+" "+u.currency,style:{fontSize:"14px",marginTop:"30px"}}))),a.createElement(c.q,{item:!0,xs:6,sm:3},a.createElement(c.n,null,a.createElement(c.v,{style:{fontSize:"17.5px",lineHeight:"20px"},htmlFor:"withdrawFee"},E(f.a.WithdrawalFee)),a.createElement(c.t,{disabled:!0,disableUnderline:!0,id:"withdrawFee",value:u&&u.raw.withdrawFee+" "+u.currency,style:{fontSize:"14px",marginTop:"30px"}}))),a.createElement(c.q,{item:!0,xs:6,sm:3},a.createElement(c.n,null,a.createElement(c.v,{style:{fontSize:"17.5px",lineHeight:"20px"},htmlFor:"transferFee"},E(f.a.TransferFee)),a.createElement(c.t,{disabled:!0,disableUnderline:!0,id:"transferFee",value:this.state.fee+" "+this.state.feeCurrency,style:{fontSize:"14px",marginTop:"30px"}}))),a.createElement(c.q,{item:!0,xs:6,sm:3},a.createElement(c.n,null,a.createElement(c.v,{style:{fontSize:"17.5px",lineHeight:"20px"},htmlFor:"willGet"},E(f.a.YouWillGet)),a.createElement(c.t,{disabled:!0,disableUnderline:!0,id:"willGet",value:k,style:{fontSize:"14px",marginTop:"30px"}})))),a.createElement("div",{style:{display:"flex",flexDirection:"column",fontSize:"14px",lineHeight:"22px"}},a.createElement("p",{style:{margin:0,color:"#000000"}},E(f.a.WithdrawImportant),"："),a.createElement("p",{style:{margin:0,color:"#9b9b9b"}},E(f.a.WithdrawImportantAddress)),a.createElement("p",{style:{margin:0,color:"#9b9b9b"}},E(f.a.WithdrawImportantFee))),a.createElement(b.a,{fullWidth:!0,disabled:!F,style:{display:"flex",height:"48px",marginTop:"24px",fontSize:"16px"},onClick:function(){if(u){var t=0;if("CYB"==e.state.feeCurrency)t=Number(e.state.withValue);else if(new O.a(A.value).minus(e.state.withValue||0).toNumber()<e.state.fee){var r=new O.a(A.value).minus(e.state.withValue||0).toNumber();t=new O.a(e.state.withValue||0).minus(e.state.fee).plus(r).toNumber()}else t=Number(e.state.withValue);w({to:u.raw.gatewayAccount,fee:e.state.feeAsset,asset:u.asset,coinType:u.currency,address:e.state.address,value:t,memoPrefix:u.raw.withdrawPrefix})}}},E(f.a.Withdraw)))))},t}(a.Component)))))},5617:function(e,t,r){"use strict";r.d(t,"b",function(){return d}),r.d(t,"a",function(){return h});var n,a=r(1),i=r(5600),s=r(115),o=r(5618),l=r(113),c=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),u=function(){return(u=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},p=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&(r[n[a]]=e[n[a]])}return r},d=function(e){var t=e.label,r=e.input,n=e.meta,s=(n.asyncValidating,n.touched),o=n.invalid,c=n.error,d=e.helperText,h=p(e,["label","input","meta","helperText"]),m=Object(l.b)(),f=m.t;m.i18n;return a.createElement(i.L,u({label:t,InputProps:{style:{fontSize:"16px"}},InputLabelProps:{style:{fontSize:"16px"}},error:s&&o,helperText:s&&f(c)||d},r,h))},h=Object(s.withStyles)(function(e){return{root:{color:o.a.btnPrimary,background:o.a.btnBgPrimary,"&:disabled":{color:o.a.btnPrimary,background:o.a.btnBgDisabled}}}})(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return c(t,e),t.prototype.render=function(){return a.createElement(i.b,u({classes:this.props.classes},this.props))},t}(a.Component))},5618:function(e,t,r){"use strict";r.d(t,"a",function(){return n});var n={primary:"rgb(0,0,0)",secondary:"rgb(10, 56, 102)",btnBgPrimary:"rgb(10, 56, 102)",btnPrimary:"white",btnBgDisabled:"rgba(155, 155, 155, 0.48)",btnIcon:{purple:"#b692dd",blue:"#54b8e1",yellow:"#fac050"}}},5625:function(e,t,r){"use strict";r.d(t,"a",function(){return d});var n=r(1),a=r(5660),i=r(5600),s=r(156),o=r(5622),l=r(113),c=function(){return(c=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},u=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&(r[n[a]]=e[n[a]])}return r},p=Object(a.a)(function(e){return{paper:{position:"relative",width:"90vw",maxWidth:"536px"},header:{position:"absolute",right:"36px",top:0,zIndex:100,"(max-width:599px)":{right:0},"(min-width:600px)":{right:"36px"}}}},{withTheme:!0}),d=function(e){var t=e.title,r=e.open,a=e.onCloseClick,d=e.children,h=e.hideHeader,m=e.dialogProps,f=e.titleProps,y=(u(e,["title","open","onCloseClick","children","hideHeader","dialogProps","titleProps"]),p()),b=Object(o.unstable_useMediaQuery)("(min-width:600px)"),w=Object(l.b)(),g=w.t;w.i18n;return n.createElement(i.h,c({open:r,classes:c({paper:y.paper},(m||{classes:{}}).classes),onClose:a},m),!h&&n.createElement("div",{style:{padding:b?"16px 48px 0 48px":0,boxShadow:b?"inset 0 -1px 0 0 #f8f9fb":"unset"}},b?n.createElement(i.q,{container:!0,style:{height:"64px"},justify:"space-between",alignItems:"center"},n.createElement(i.M,c({variant:"h4",style:{fontSize:"26px",fontWeight:600}},f),t?g(t):null),n.createElement(i.s,{style:{right:"-12px"},onClick:a},n.createElement(s.a,null))):n.createElement("div",{className:y.header,style:{right:b?"36px":0}},n.createElement(i.s,{onClick:a},n.createElement(s.a,null)))),n.createElement("div",{style:{padding:b?(h?32:0)+"px 48px 32px 48px":"16px"}},d))}},5664:function(e,t,r){"use strict";r.d(t,"a",function(){return d});var n,a=r(1),i=r(5711),s=r.n(i),o=r(5600),l=r(156),c=r(33),u=r(113),p=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),d=Object(u.c)()(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.download=function(e){if(void 0===e&&(e="deposit.jpg"),t.qrcode){var r=t.qrcode.getElementsByTagName("canvas")[0];r&&r.toBlob(function(t){if(t){var r=new File([t],e,{type:"image/png"}),n=URL.createObjectURL(r),a=document.createElement("a");a.download=e,a.href=n,a.target="_blank",a.dispatchEvent(new MouseEvent("click"))}})}},t.updateQRImg=function(){if(t.qrcode&&t.qrcodeImg){var e=t.qrcode.getElementsByTagName("canvas")[0];if(!e)return;e.toBlob(function(e){if(e&&t.qrcodeImg){var r=URL.createObjectURL(e);t.qrcodeImg.src=r;var n=function(){window.URL.revokeObjectURL(r),t.qrcodeImg&&t.qrcodeImg.removeEventListener("load",n)};t.qrcodeImg.addEventListener("load",n)}})}},t.isAppleDevice=function(){return/iphone|ipad|ipod/i.test(navigator.userAgent)},t}return p(t,e),t.prototype.componentDidMount=function(){this.updateQRImg()},t.prototype.componentDidUpdate=function(){this.updateQRImg()},t.prototype.render=function(){var e=this,t=this.props,r=t.text,n=t.filename,i=t.t;return a.createElement(o.q,{container:!0,direction:"column",alignContent:"center"},a.createElement("div",{ref:function(t){return e.qrcode=t}},a.createElement("div",{style:{display:"none"}},a.createElement(s.a,{value:r})),a.createElement("img",{style:{width:"12em",height:"12em"},ref:function(t){return e.qrcodeImg=t}})),this.isAppleDevice()?a.createElement(o.M,{align:"center",style:{margin:"0.5em"}},i(c.a.SaveQRCodeLongPress)):a.createElement(o.b,{color:"secondary",onClick:function(t){return e.download(n)}},i(c.a.SaveQRCode),a.createElement(l.b,{style:{marginLeft:"4px"},fontSize:"small"})))},t}(a.Component))}}]);